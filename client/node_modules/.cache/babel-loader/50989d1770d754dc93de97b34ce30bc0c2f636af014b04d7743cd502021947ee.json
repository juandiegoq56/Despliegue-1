{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nfunction parseJwt(token) {\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(jsonPayload);\n}\nconst useTokenValidation = () => {\n  _s();\n  const [isLogged, setIsLogged] = useState(parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now());\n  const logout = () => {\n    // L贸gica para cerrar sesi贸n: eliminar el token del localStorage y actualizar el estado isLogged a false\n    localStorage.removeItem('token');\n    setIsLogged(false);\n  };\n  return {\n    isLogged,\n    logout\n  };\n};\n_s(useTokenValidation, \"K1t4P2yOjSL0GB4pgTq14Bauqvc=\");\nexport default useTokenValidation;","map":{"version":3,"names":["useState","useEffect","parseJwt","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","window","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","useTokenValidation","_s","isLogged","setIsLogged","localStorage","getItem","exp","Date","now","logout","removeItem"],"sources":["/home/juan/Desktop/Proyectos/Login jwt/client/src/components/useUser.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nfunction parseJwt(token) {\n    const base64Url = token.split('.')[1];\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n\n    return JSON.parse(jsonPayload);\n}\n\nconst useTokenValidation = () => {\n    const [isLogged, setIsLogged] = useState(parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now());\n\n    const logout= () => {\n        // L贸gica para cerrar sesi贸n: eliminar el token del localStorage y actualizar el estado isLogged a false\n        localStorage.removeItem('token');\n        setIsLogged(false);\n    };\n\n    \n\n    return { isLogged, logout };\n};\n\nexport default useTokenValidation;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,SAASC,QAAQA,CAACC,KAAK,EAAE;EACrB,MAAMC,SAAS,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrC,MAAMC,MAAM,GAAGF,SAAS,CAACG,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;EAC9D,MAAMC,WAAW,GAAGC,kBAAkB,CAACC,MAAM,CAACC,IAAI,CAACL,MAAM,CAAC,CAACD,KAAK,CAAC,EAAE,CAAC,CAACO,GAAG,CAAC,UAASC,CAAC,EAAE;IACjF,OAAO,GAAG,GAAG,CAAC,IAAI,GAAGA,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAC;EAChE,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC,CAAC;EAEZ,OAAOC,IAAI,CAACC,KAAK,CAACX,WAAW,CAAC;AAClC;AAEA,MAAMY,kBAAkB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAACE,QAAQ,CAACsB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAACC,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;EAEzG,MAAMC,MAAM,GAAEA,CAAA,KAAM;IAChB;IACAL,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;IAChCP,WAAW,CAAC,KAAK,CAAC;EACtB,CAAC;EAID,OAAO;IAAED,QAAQ;IAAEO;EAAO,CAAC;AAC/B,CAAC;AAACR,EAAA,CAZID,kBAAkB;AAcxB,eAAeA,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}