{"ast":null,"code":"var _jsxFileName = \"/home/juan/Desktop/Proyectos/Login jwt/client/src/components/middelware.js\";\nimport { Navigate, Outlet } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction parseJwt(token) {\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(jsonPayload);\n}\nlet isLogged = parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now();\nexport const ProtectedRoute = ({\n  children,\n  redirectTo\n}) => {\n  if (isLogged) {\n    return children || /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 24\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: redirectTo,\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 12\n    }, this);\n  }\n};\n_c = ProtectedRoute;\nexport const ProtectedRouteLogin = ({\n  children,\n  redirectTo\n}) => {\n  if (!isLogged) {\n    return children || /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 26\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: redirectTo,\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 14\n    }, this);\n  }\n};\n_c2 = ProtectedRouteLogin;\nexport const logout = () => {\n  localStorage.removeItem('token'); // Eliminar el token del almacenamiento local\n  isLogged = false; // Actualizar la variable isLogged a false\n};\nexport default {\n  ProtectedRoute,\n  ProtectedRouteLogin\n};\nvar _c, _c2;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"ProtectedRouteLogin\");","map":{"version":3,"names":["Navigate","Outlet","jsxDEV","_jsxDEV","parseJwt","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","window","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","isLogged","localStorage","getItem","exp","Date","now","ProtectedRoute","children","redirectTo","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","ProtectedRouteLogin","_c2","logout","removeItem","$RefreshReg$"],"sources":["/home/juan/Desktop/Proyectos/Login jwt/client/src/components/middelware.js"],"sourcesContent":["import { Navigate, Outlet } from \"react-router-dom\";\n\n\nfunction parseJwt (token) {\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n\n  return JSON.parse(jsonPayload);\n}\nlet isLogged = (parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now());\nexport const ProtectedRoute = ({ children, redirectTo }) => {\n  \n  \n  if (isLogged) {\n    return children || <Outlet />;\n  } else {\n    return <Navigate to={redirectTo} replace />;\n  }\n};\nexport const ProtectedRouteLogin = ({ children, redirectTo }) => {\n    \n  \n    if (!isLogged) {\n      return children || <Outlet />;\n    } else {\n      return <Navigate to={redirectTo} replace />;\n    }\n  };\n  export const logout = () => {\n    localStorage.removeItem('token'); // Eliminar el token del almacenamiento local\n    isLogged = false; // Actualizar la variable isLogged a false\n  };\n  \nexport default {ProtectedRoute,ProtectedRouteLogin};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,MAAM,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGpD,SAASC,QAAQA,CAAEC,KAAK,EAAE;EACxB,MAAMC,SAAS,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrC,MAAMC,MAAM,GAAGF,SAAS,CAACG,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;EAC9D,MAAMC,WAAW,GAAGC,kBAAkB,CAACC,MAAM,CAACC,IAAI,CAACL,MAAM,CAAC,CAACD,KAAK,CAAC,EAAE,CAAC,CAACO,GAAG,CAAC,UAASC,CAAC,EAAE;IACjF,OAAO,GAAG,GAAG,CAAC,IAAI,GAAGA,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAC;EAChE,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC,CAAC;EAEZ,OAAOC,IAAI,CAACC,KAAK,CAACX,WAAW,CAAC;AAChC;AACA,IAAIY,QAAQ,GAAIlB,QAAQ,CAACmB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAACC,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAE;AAChF,OAAO,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAW,CAAC,KAAK;EAG1D,IAAIR,QAAQ,EAAE;IACZ,OAAOO,QAAQ,iBAAI1B,OAAA,CAACF,MAAM;MAAA8B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/B,CAAC,MAAM;IACL,oBAAO/B,OAAA,CAACH,QAAQ;MAACmC,EAAE,EAAEL,UAAW;MAACrB,OAAO;IAAA;MAAAsB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC7C;AACF,CAAC;AAACE,EAAA,GARWR,cAAc;AAS3B,OAAO,MAAMS,mBAAmB,GAAGA,CAAC;EAAER,QAAQ;EAAEC;AAAW,CAAC,KAAK;EAG7D,IAAI,CAACR,QAAQ,EAAE;IACb,OAAOO,QAAQ,iBAAI1B,OAAA,CAACF,MAAM;MAAA8B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/B,CAAC,MAAM;IACL,oBAAO/B,OAAA,CAACH,QAAQ;MAACmC,EAAE,EAAEL,UAAW;MAACrB,OAAO;IAAA;MAAAsB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC7C;AACF,CAAC;AAACI,GAAA,GARSD,mBAAmB;AAS9B,OAAO,MAAME,MAAM,GAAGA,CAAA,KAAM;EAC1BhB,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;EAClClB,QAAQ,GAAG,KAAK,CAAC,CAAC;AACpB,CAAC;AAEH,eAAe;EAACM,cAAc;EAACS;AAAmB,CAAC;AAAC,IAAAD,EAAA,EAAAE,GAAA;AAAAG,YAAA,CAAAL,EAAA;AAAAK,YAAA,CAAAH,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}