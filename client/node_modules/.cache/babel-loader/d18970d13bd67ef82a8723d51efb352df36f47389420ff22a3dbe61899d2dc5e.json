{"ast":null,"code":"var _jsxFileName = \"/home/juan/Desktop/Proyectos/Login jwt/client/src/App.js\";\nimport React from 'react';\nimport App3 from './Vistas/login';\nimport Dashboard from './Vistas/home';\nimport { BrowserRouter as Router, Route, Routes, Navigate, Outlet } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction parseJwt(token) {\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(jsonPayload);\n}\nlet tokenExistAndStillValid = parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now();\nconst ProtectedRoute = ({\n  children,\n  redirectTo\n}) => {\n  const {\n    isLogged\n  } = tokenExistAndStillValid;\n  console.log(isLogged);\n  if (isLogged) {\n    return children || /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 24\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: redirectTo,\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 12\n    }, this);\n  }\n};\n_c = ProtectedRoute;\nconst ProtectedRouteLogin = ({\n  children,\n  redirectTo\n}) => {\n  const {\n    isLogged\n  } = tokenExistAndStillValid;\n  if (!isLogged) {\n    return children || /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 26\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: redirectTo,\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 14\n    }, this);\n  }\n};\n_c2 = ProtectedRouteLogin;\nconst Main = () => {\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          redirectTo: \"/home\",\n          children: /*#__PURE__*/_jsxDEV(App3, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 66\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 30\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/home\",\n        element: /*#__PURE__*/_jsxDEV(ProtectedRouteLogin, {\n          redirectTo: \"/\",\n          children: /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 71\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(App3, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 30\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_c3 = Main;\nexport default Main;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"ProtectedRouteLogin\");\n$RefreshReg$(_c3, \"Main\");","map":{"version":3,"names":["React","App3","Dashboard","BrowserRouter","Router","Route","Routes","Navigate","Outlet","jsxDEV","_jsxDEV","parseJwt","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","window","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","tokenExistAndStillValid","localStorage","getItem","exp","Date","now","ProtectedRoute","children","redirectTo","isLogged","console","log","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","ProtectedRouteLogin","_c2","Main","path","element","_c3","$RefreshReg$"],"sources":["/home/juan/Desktop/Proyectos/Login jwt/client/src/App.js"],"sourcesContent":["import React from 'react';\nimport App3 from './Vistas/login';\nimport Dashboard from './Vistas/home';\nimport { BrowserRouter as Router, Route, Routes, Navigate,Outlet  } from 'react-router-dom';\n\nfunction parseJwt (token) {\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n\n  return JSON.parse(jsonPayload);\n}\n\nlet tokenExistAndStillValid = (parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now());\n\nconst ProtectedRoute = ({ children, redirectTo }) => {\n  const { isLogged } = tokenExistAndStillValid\n  console.log(isLogged)\n  if (isLogged) {\n    return children || <Outlet />;\n  } else {\n    return <Navigate to={redirectTo} replace />;\n  }\n};\nconst ProtectedRouteLogin = ({ children, redirectTo }) => {\n    const { isLogged } = tokenExistAndStillValid;\n  \n    if (!isLogged) {\n      return children || <Outlet />;\n    } else {\n      return <Navigate to={redirectTo} replace />;\n    }\n  };\n\nconst Main = () => {\n  return (\n    <Router>\n    <Routes>\n    <Route path=\"/\" element={<ProtectedRoute  redirectTo=\"/home\"><App3 /></ProtectedRoute>} />\n    <Route path=\"/home\" element={<ProtectedRouteLogin  redirectTo=\"/\"><Dashboard/></ProtectedRouteLogin>} />\n    <Route path=\"/\" element={<App3 />} />\n    </Routes>\n  </Router>\n      \n  );\n}\n\nexport default Main;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}