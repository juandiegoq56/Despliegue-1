{"ast":null,"code":"function parseJwt(token) {\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(jsonPayload);\n}\nconst useTokenValidation = () => {\n  let isLogged = false;\n  if (localStorage.getItem('token') === null) {\n    isLogged = false;\n  } else if (parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now() === true) {\n    isLogged = true;\n    const payload = parseJwt(localStorage.getItem('token'));\n    const nombreCompleto = payload.nombreCompleto;\n    const numeroEmpleado = payload.numeroEmpleado;\n  } else if (parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now() === false) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('Nombre');\n    localStorage.removeItem('tipo');\n    localStorage.removeItem('admin');\n    isLogged = false;\n  }\n  return {\n    isLogged,\n    nombreCompleto,\n    numeroEmpleado\n  };\n};\nexport default useTokenValidation;","map":{"version":3,"names":["parseJwt","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","window","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","useTokenValidation","isLogged","localStorage","getItem","exp","Date","now","payload","nombreCompleto","numeroEmpleado","removeItem"],"sources":["/home/manuel/Descargas/azteca/Despliegue-1/client/src/components/useUser.js"],"sourcesContent":["\r\nfunction parseJwt (token) {\r\n    const base64Url = token.split('.')[1];\r\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n    const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {\r\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n    }).join(''));\r\n  \r\n    return JSON.parse(jsonPayload);\r\n  }\r\n  const useTokenValidation = () => {\r\n    let isLogged=false;\r\n    \r\n    if(localStorage.getItem('token')===null){\r\n       isLogged=false;\r\n    }else if((parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now())=== true){\r\n      isLogged= true\r\n      const payload = parseJwt(localStorage.getItem('token'));\r\n      const nombreCompleto = payload.nombreCompleto;\r\n      const numeroEmpleado = payload.numeroEmpleado;\r\n     \r\n    }\r\n    else if((parseJwt(localStorage.getItem('token')).exp * 1000 > Date.now())=== false){\r\n      localStorage.removeItem('token')\r\n      localStorage.removeItem('Nombre')\r\n      localStorage.removeItem('tipo')\r\n      localStorage.removeItem('admin')\r\n      isLogged= false\r\n    } \r\n    return {isLogged,nombreCompleto,numeroEmpleado}\r\n    }\r\n  export default useTokenValidation;"],"mappings":"AACA,SAASA,QAAQA,CAAEC,KAAK,EAAE;EACtB,MAAMC,SAAS,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrC,MAAMC,MAAM,GAAGF,SAAS,CAACG,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;EAC9D,MAAMC,WAAW,GAAGC,kBAAkB,CAACC,MAAM,CAACC,IAAI,CAACL,MAAM,CAAC,CAACD,KAAK,CAAC,EAAE,CAAC,CAACO,GAAG,CAAC,UAASC,CAAC,EAAE;IACjF,OAAO,GAAG,GAAG,CAAC,IAAI,GAAGA,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAC;EAChE,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC,CAAC;EAEZ,OAAOC,IAAI,CAACC,KAAK,CAACX,WAAW,CAAC;AAChC;AACA,MAAMY,kBAAkB,GAAGA,CAAA,KAAM;EAC/B,IAAIC,QAAQ,GAAC,KAAK;EAElB,IAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,KAAG,IAAI,EAAC;IACrCF,QAAQ,GAAC,KAAK;EACjB,CAAC,MAAK,IAAInB,QAAQ,CAACoB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAACC,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,KAAK,IAAI,EAAC;IACjFL,QAAQ,GAAE,IAAI;IACd,MAAMM,OAAO,GAAGzB,QAAQ,CAACoB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;IACvD,MAAMK,cAAc,GAAGD,OAAO,CAACC,cAAc;IAC7C,MAAMC,cAAc,GAAGF,OAAO,CAACE,cAAc;EAE/C,CAAC,MACI,IAAI3B,QAAQ,CAACoB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAACC,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,KAAK,KAAK,EAAC;IACjFJ,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;IAChCR,YAAY,CAACQ,UAAU,CAAC,QAAQ,CAAC;IACjCR,YAAY,CAACQ,UAAU,CAAC,MAAM,CAAC;IAC/BR,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;IAChCT,QAAQ,GAAE,KAAK;EACjB;EACA,OAAO;IAACA,QAAQ;IAACO,cAAc;IAACC;EAAc,CAAC;AAC/C,CAAC;AACH,eAAeT,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}